!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=Promise,a=t.ajaxFn=function(e,t,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(i){i=r({},s,i);var u=void 0;return o.prototype.cancel=function(){u instanceof XMLHttpRequest&&(u.abort(),u=null,console.log("XMLHttpRequest Abort"))},new o(function(r,o){var s=i,c=s.url,f=s.param,l=s.type,p=void 0===l?"GET":l,d=s.localData,v=s.uploadProgress,y=s.noLoading,g=void 0!==y&&y,h=s.requestType,m=s.tipMsg;if(!c&&!d)return console.error("请求地址不存在"),void o({msg:"开发时提示~参数错误"});!g&&e&&e(m);var b=function(e){if(n){if(n(e))return}switch(e.status){case 1:case!0:return void r(e);case 0:case!1:return void o(e);default:a&&a(e,r,o)}};if(d)return!g&&t&&t(),void b(d);var O=(Date.now(),p.toUpperCase()),j="json"===h;u=new XMLHttpRequest;try{u.onreadystatechange=function(){if(4==u.readyState){if(!g&&t&&t(g),u.status>=200&&u.status<300)try{var e=JSON.parse(u.responseText);b(e)}catch(e){o({retcode:u.status,msg:"网络不稳定，请稍后重试."})}else{if(0===u.status)return;o({retcode:u.status,msg:"网络不稳定，请稍后重试.."})}u=null}};var w=[];for(var x in f)(f[x]||!1===f[x]||0===f[x])&&w.push(x+"="+encodeURIComponent(f[x]));if("FORM"===O){var T=new FormData;T.append("file",f.file),T.append("bkn",bkn),u.upload.onprogress=function(e){e.lengthComputable&&v&&v(e.loaded,e.total)},u.open("POST",c),u.withCredentials=!0,u.send(T)}else if("JSONP"===O){O="GET",f.callback||o({status:0}),window[f.callback]=function(e){b(e)},w.length>0&&(c+=(c.indexOf("?")>-1?"&":"?")+w.join("&"));var P=document.createElement("script"),R=document.getElementsByTagName("head")[0];P.src=c,R.appendChild(P)}else{var q="";switch(O){case"PUT":case"POST":q=JSON.stringify(f);break;case"DELETE":case"GET":w.length>0&&(c+=(c.indexOf("?")>-1?"&":"?")+w.join("&"))}u.open(O,c,!0),u.withCredentials=!0,u.setRequestHeader("Content-Type",j?"application/json;charset=utf-8":"application/x-www-form-urlencoded"),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),j?u.send(q):u.send("POST"===O?w.join("&"):"")}}catch(e){console.error(e)}})}};t.ajax=a()}])});